<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-gb">
<head>
    <title>Greenwich Freecycle Add New</title>
    <link rel="stylesheet" href="../Content/bootstrap.min.css" />
    <style>
        #gallery .thumbnail {
            width: 150px;
            height: 150px;
            float: left;
            margin: 2px;
        }

            #gallery .thumbnail img {
                width: 150px;
                height: 150px;
            }
    </style>
</head>
<body>
    {{topNav}}
    <form action="../Controller/AddAdvert.php" class="form-horizontal" enctype="multipart/form-data" method="post">
        <div class="form-group">
            <label for="advertTitleInput" class="col-sm-2 control-label">Advert title</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="advertTitleInput" name="advertTitleInput" placeholder="Advert title" required="required" />
            </div>
        </div>
        <div class="form-group">
            <label for="advertDescriptionTextarea" class="col-sm-2 control-label">Advert description</label>
            <div class="col-sm-10">
                <textarea class="form-control" cols="40" id="advertDescriptionTextarea" name="advertDescriptionTextarea" placeholder="Advert description" required="required" rows="5" type="text"> </textarea>
            </div>
        </div>
        <div class="form-group">
            <label for="fileInput[]" class="col-sm-2 control-label">Select images to upload</label>
            <div class="col-sm-10">
                <input type="file" id="fileInput[]" name="fileInput[]" multiple="multiple" />
            </div>
        </div>
        <h3 class="hidden" id="imagesHeader">Images</h3>
        <div class="form-group" id="gallery"></div>
        <div class="form-group">
            <div class="col-sm-10">
                <button type="submit" class="btn btn-default" value="post">Add Advert</button>
            </div>
        </div>
    </form>
    <script>
        var uploadfiles = document.querySelector('#fileinput');
        uploadfiles.addEventListener('change', function () {
            var files = this.files;
            for (var i = 0; i < files.length; i++) {
                previewImage(this.files[i]);
            }
            var imagesHeaderId = "imagesHeader";
            var images = document.getElementById(imagesHeaderId);
            images.className = "";

        }, false);
    </script>
    <script>
        function previewImage(file) {
            var galleryId = "gallery";
            var gallery = document.getElementById(galleryId);
            var imageType = /image.*/;
            if (!file.type.match(imageType)) {
                throw "File Type must be an image";
            }
            var thumb = document.createElement("div");
            thumb.classList.add('thumbnail'); // Add the class thumbnail to the created div
            var img = document.createElement("img");
            img.file = file;
            thumb.appendChild(img);
            gallery.appendChild(thumb);
            // Using FileReader to display the image content
            var reader = new FileReader();
            reader.onload = (function (aImg) { return function (e) { aImg.src = e.target.result; }; })(img);
            reader.readAsDataURL(file);
        }
    </script>
</body>
</html>